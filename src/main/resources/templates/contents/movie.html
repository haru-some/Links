<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>영화</title>
<style>
	.back-drop{
		margin-top : 80px;
		width : 100%;
		height : 550px;
		position : relative;
	}
	.backdrop-img{
		position: absolute; top:0; left: 0;
	  	width: 100%;
	  	height: 100%;
	}
	.detail-tbl{
		margin-left : 20px;
	}

</style>
</head>
<body>
	<th:block th:include="common/header"></th:block>
		<div class="back-drop">
			<img class="backdrop-img">
		</div>
		<div class="container d-flex">
			<div class="poster">
				<img class="poster-img">
			</div>
			<table class="detail-tbl">
				<tr>
					<td>평가하기</td>
					<td>평균 별점</td>
					<td>기능버튼</td>
				</tr>
			</table>			
		</div>
	<th:block th:include="common/footer"></th:block>	
</body>
<script>
	let movieId =0;
	$.ajax({
		url : "/api/movie",
		type : "get",
		success : function(data){
			const json = JSON.parse(data);
			movieId = json.results[0].id
			console.log(movieId);
			$.ajax({
				url : "/api/movieId",
				type: "get",
				data: {movieId : movieId},
				success : function(data){
					const movie = JSON.parse(data);
					console.log(movie);
					const imgPath = "https://image.tmdb.org/t/p/original"+movie.backdrop_path;
					//console.log(imgPath);
					$(".backdrop-img").attr("src",imgPath);
					
					const posterPath = "https://image.tmdb.org/t/p/w342"+movie.poster_path;
					$(".poster-img").attr("src",posterPath);
				}
			});
		}
	});
	function seletMovie(id){
		$.ajax({
			url : "/api/movieId",
			type: "get",
			data: {movieId : movieId},
			success : function(data){
				console.log(data);
			}
		});
	}

</script>
</html>